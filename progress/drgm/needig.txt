<mxfile host="app.diagrams.net" modified="2026-02-26T06:05:00.000Z" agent="Perplexity" version="24.7.8">
  <diagram id="fixManagerArchitecture" name="FIX Manager Architecture">
    <mxGraphModel dx="1400" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- ===== GROUPS ===== -->
        <mxCell id="gClients" value="UI / Operators" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;strokeWidth=2;strokeColor=#4D4D4D;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="40" y="120" width="260" height="320" as="geometry"/>
        </mxCell>

        <mxCell id="gHost" value="FIX Manager (.NET)" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;strokeWidth=2;strokeColor=#4D4D4D;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="330" y="70" width="740" height="560" as="geometry"/>
        </mxCell>

        <mxCell id="gVenue" value="External FIX Counterparties / Venues" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;strokeWidth=2;strokeColor=#4D4D4D;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1110" y="180" width="420" height="250" as="geometry"/>
        </mxCell>

        <!-- ===== CLIENTS ===== -->
        <mxCell id="cWeb" value="Web UI&#10;(ASP.NET Core / Blazor)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#1F4E79;fillColor=#EAF2FF;" vertex="1" parent="1">
          <mxGeometry x="70" y="170" width="220" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="cDesktop" value="Desktop UI&#10;(WPF / WinUI)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#1F4E79;fillColor=#EAF2FF;" vertex="1" parent="1">
          <mxGeometry x="70" y="290" width="220" height="90" as="geometry"/>
        </mxCell>

        <!-- ===== HOST: API + REALTIME GATEWAY ===== -->
        <mxCell id="api" value="REST API&#10;Session & Ref Data Controllers" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#2E7D32;fillColor=#E9F7EF;" vertex="1" parent="1">
          <mxGeometry x="360" y="120" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="ws" value="WebSocket Endpoint&#10;Realtime updates" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#2E7D32;fillColor=#E9F7EF;" vertex="1" parent="1">
          <mxGeometry x="360" y="240" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="router" value="UI Message Router&#10;(Subscriptions & Commands)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#6A1B9A;fillColor=#F3E8FF;" vertex="1" parent="1">
          <mxGeometry x="630" y="200" width="230" height="90" as="geometry"/>
        </mxCell>

        <!-- ===== HOST: INTERNAL QUEUES & WORKERS ===== -->
        <mxCell id="cmdChannel" value="Command Queue&#10;(Channel&lt;SessionCommand&gt;)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#6A1B9A;fillColor=#F3E8FF;" vertex="1" parent="1">
          <mxGeometry x="630" y="320" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="evtChannel" value="Event Queue&#10;(Channel&lt;FixEvent&gt;)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#6A1B9A;fillColor=#F3E8FF;" vertex="1" parent="1">
          <mxGeometry x="630" y="430" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="bgSession" value="Session Command Processor&#10;(BackgroundService)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#B26A00;fillColor=#FFF3E0;" vertex="1" parent="1">
          <mxGeometry x="890" y="320" width="250" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="bgEvents" value="Event Distributor&#10;(BackgroundService)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#B26A00;fillColor=#FFF3E0;" vertex="1" parent="1">
          <mxGeometry x="890" y="430" width="250" height="80" as="geometry"/>
        </mxCell>

        <!-- ===== HOST: SESSION MGMT & REFERENCE DATA ===== -->
        <mxCell id="sessionSvc" value="Session Management Service&#10;(Session Registry, State)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#1565C0;fillColor=#E3F2FD;" vertex="1" parent="1">
          <mxGeometry x="360" y="360" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="refDataSvc" value="Reference Data Service&#10;(Instruments, Counterparties, Config)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#1565C0;fillColor=#E3F2FD;" vertex="1" parent="1">
          <mxGeometry x="360" y="470" width="230" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="refDb" value="Reference Data Store&#10;(SQL / Cache)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;strokeWidth=2;strokeColor=#37474F;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="640" y="540" width="240" height="100" as="geometry"/>
        </mxCell>

        <!-- ===== HOST: IN-HOUSE FIX CONNECTOR ===== -->
        <mxCell id="fixConnector" value="In-house FIX Connector&#10;(SessionSettings, Parser, Encoder, Transport)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#C62828;fillColor=#FFEBEE;" vertex="1" parent="1">
          <mxGeometry x="890" y="190" width="250" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="ser" value="FIX Message Serializer / Parser&#10;(Tag ↔ Domain Model)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#C62828;fillColor=#FFCDD2;" vertex="1" parent="1">
          <mxGeometry x="890" y="120" width="250" height="60" as="geometry"/>
        </mxCell>

        <!-- ===== VENUES ===== -->
        <mxCell id="venue1" value="Venue / Broker 1&#10;(FIX TCP)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#5D4037;fillColor=#EFEBE9;" vertex="1" parent="1">
          <mxGeometry x="1140" y="210" width="200" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="venue2" value="Venue / Broker 2&#10;(FIX TCP)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#5D4037;fillColor=#EFEBE9;" vertex="1" parent="1">
          <mxGeometry x="1340" y="270" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="venueN" value="Other Venues..." style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#5D4037;fillColor=#EFEBE9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="340" width="210" height="70" as="geometry"/>
        </mxCell>

        <!-- ===== CONNECTORS ===== -->
        <!-- UI -> API (HTTP) -->
        <mxCell id="eWebApi" value="HTTP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="cWeb" target="api">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="215"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eDeskApi" value="HTTP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="cDesktop" target="api">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="335"/>
              <mxPoint x="320" y="165"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- UI -> WebSocket -->
        <mxCell id="eWebWs" value="WebSocket" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="cWeb" target="ws">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eDeskWs" value="WebSocket" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="cDesktop" target="ws">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="335"/>
              <mxPoint x="320" y="285"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- API -> Session / Reference Data Services -->
        <mxCell id="eApiSession" value="Session ops" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="api" target="sessionSvc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="475" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eApiRef" value="Ref data ops" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="api" target="refDataSvc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="475" y="310"/>
              <mxPoint x="475" y="515"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- WS -> Router -->
        <mxCell id="eWsRouter" value="UI commands / subscriptions" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="ws" target="router">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="605" y="285"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Router -> Command Queue -->
        <mxCell id="eRouterCmd" value="enqueue SessionCommand" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="router" target="cmdChannel">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="745" y="295"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Command Queue -> Session Command Processor -->
        <mxCell id="eCmdBg" value="dequeue" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="cmdChannel" target="bgSession">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="855" y="365"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Session Command Processor -> Session Service & FIX Connector -->
        <mxCell id="eBgSessSvc" value="update session state" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="bgSession" target="sessionSvc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="840" y="410"/>
              <mxPoint x="475" y="410"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eBgFixConn" value="Start/Stop sessions, Send commands" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="bgSession" target="fixConnector">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1015" y="310"/>
              <mxPoint x="1015" y="240"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- FIX Connector <-> Venues -->
        <mxCell id="eFixVenue1" value="FIX TCP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="fixConnector" target="venue1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="230"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eFixVenue2" value="FIX TCP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="fixConnector" target="venue2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="270"/>
              <mxPoint x="1180" y="310"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="eFixVenueN" value="FIX TCP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="fixConnector" target="venueN">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="310"/>
              <mxPoint x="1180" y="375"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- FIX Connector -> Event Queue (FIX events/messages) -->
        <mxCell id="eFixEvt" value="normalized FixEvent" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="fixConnector" target="evtChannel">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1015" y="310"/>
              <mxPoint x="745" y="310"/>
              <mxPoint x="745" y="475"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Event Queue -> Event Distributor -->
        <mxCell id="eEvtBg" value="dequeue" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="evtChannel" target="bgEvents">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="855" y="475"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Event Distributor -> WebSocket (UI updates) -->
        <mxCell id="eBgWs" value="push updates" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="bgEvents" target="ws">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1015" y="420"/>
              <mxPoint x="475" y="420"/>
              <mxPoint x="475" y="285"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Event Distributor -> Reference Data Store (audit, history) -->
        <mxCell id="eBgRefDb" value="persist messages / audit" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="bgEvents" target="refDb">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1015" y="540"/>
              <mxPoint x="760" y="540"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Reference Data Service -> DB -->
        <mxCell id="eRefSvcDb" value="CRUD" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="refDataSvc" target="refDb">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="515"/>
              <mxPoint x="600" y="580"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Ref Data Service -> Session Mgmt (config) -->
        <mxCell id="eRefSess" value="load session config" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="refDataSvc" target="sessionSvc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="475" y="450"/>
              <mxPoint x="475" y="405"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Session Mgmt -> FIX Connector (settings) -->
        <mxCell id="eSessFix" value="build SessionSettings" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="sessionSvc" target="fixConnector">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="405"/>
              <mxPoint x="600" y="240"/>
              <mxPoint x="890" y="240"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Serializer / Parser <-> FIX Connector -->
        <mxCell id="eSerFix" value="tag ↔ domain conversion" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jettySize=auto;html=1;startArrow=blockThin;startFill=1;endArrow=blockThin;endFill=1;strokeWidth=2;" edge="1" parent="1" source="ser" target="fixConnector">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1015" y="190"/>
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>